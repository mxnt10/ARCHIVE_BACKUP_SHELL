Somente em b/: cmake-build-debug
diff -ur a/examples/player/config/VideoEQConfigPage.cpp b/examples/player/config/VideoEQConfigPage.cpp
--- a/examples/player/config/VideoEQConfigPage.cpp	2024-01-28 19:58:27.000000000 -0300
+++ b/examples/player/config/VideoEQConfigPage.cpp	2024-01-29 13:15:24.649554197 -0300
@@ -95,7 +95,7 @@
 {
     mpEngine->clear();
     QVector<Engine> es(engines);
-    qSort(es);
+//     qSort(es);
     mEngines = es;
     foreach (Engine e, es) {
         if (e == SWScale) {
diff -ur a/examples/player/MainWindow.cpp b/examples/player/MainWindow.cpp
--- a/examples/player/MainWindow.cpp	2024-01-28 19:58:27.000000000 -0300
+++ b/examples/player/MainWindow.cpp	2024-01-29 00:22:09.721405194 -0300
@@ -24,17 +24,17 @@
 #include <QtAV/VideoShaderObject.h>
 #include <QtAVWidgets>
 #include <QtCore/QtDebug>
-#include <QtCore/QLocale>
-#include <QtCore/QTimer>
+#include <QLocale>
+#include <QTimer>
 #include <QTimeEdit>
 #include <QLabel>
 #include <QApplication>
-#include <QDesktopWidget>
+// #include <QDesktopWidget>
 #include <QDesktopServices>
-#include <QtCore/QFileInfo>
-#include <QtCore/QTextCodec>
-#include <QtCore/QTextStream>
-#include <QtCore/QUrl>
+#include <QFileInfo>
+// #include <QTextCodec>
+#include <QTextStream>
+#include <QUrl>
 #include <QGraphicsOpacityEffect>
 #include <QComboBox>
 #include <QResizeEvent>
@@ -51,6 +51,7 @@
 #include <QKeyEvent>
 #include <QWheelEvent>
 #include <QStyleFactory>
+#include <QActionGroup>
 
 #include "ClickableMenu.h"
 #include "Slider.h"
@@ -440,9 +441,9 @@
     subMenu->addAction(pWA); //must add action after the widget action is ready. is it a Qt bug?
     box->addItem(tr("Auto detect"), QString::fromLatin1("AutoDetect"));
     box->addItem(tr("System"), QString::fromLatin1("System"));
-    foreach (const QByteArray& cs, QTextCodec::availableCodecs()) {
-        box->addItem(QString::fromLatin1(cs), QString::fromLatin1(cs));
-    }
+//     foreach (const QByteArray& cs, QTextCodec::availableCodecs()) {
+//         box->addItem(QString::fromLatin1(cs), QString::fromLatin1(cs));
+//     }
     connect(box, SIGNAL(activated(QString)), SLOT(setSubtitleCharset(QString)));
     mpSubtitle->setCodec(box->itemData(box->currentIndex()).toByteArray());
     box->setToolTip(tr("Auto detect requires libchardet"));
@@ -1067,7 +1068,7 @@
         return;
     }
 #endif //WHEEL_SPEED
-    QPointF p = mpRenderer->widget()->mapFrom(this, e->pos());
+    QPointF p = mpRenderer->widget()->mapFrom(this, e->position());
     QPointF fp = mpRenderer->mapToFrame(p);
     //qDebug() <<  p << fp;
     if (fp.x() < 0)
@@ -1124,7 +1125,7 @@
         return;
     }
     QTextStream ts(&f);
-    ts.setCodec("UTF-8");
+//     ts.setCodec("UTF-8");
     QString text = ts.readAll();
     QMessageBox::information(0, tr("Help"), text);
 }
@@ -1276,7 +1277,7 @@
     static TVView *tvv = new TVView;
     tvv->show();
     connect(tvv, SIGNAL(clicked(QString,QString)), SLOT(onPlayListClick(QString,QString)));
-    tvv->setMaximumHeight(qApp->desktop()->height());
+//     tvv->setMaximumHeight(qApp->desktop()->height());
     tvv->setMinimumHeight(tvv->width()*2);
 }
 
diff -ur a/examples/player/Slider.cpp b/examples/player/Slider.cpp
--- a/examples/player/Slider.cpp	2024-01-28 19:58:27.000000000 -0300
+++ b/examples/player/Slider.cpp	2024-01-29 13:05:11.989495185 -0300
@@ -24,6 +24,7 @@
 #include "Slider.h"
 #include <QApplication>
 #include <QMouseEvent>
+#include <QEvent>
 
 #if CODE_FOR_CLICK <= 1
 #include <QStyle>
@@ -105,13 +106,13 @@
 void Slider::enterEvent(QEvent *event)
 {
     emit onEnter();
-    QSlider::enterEvent(event);
+//     QSlider::enterEvent(event);
 }
 
 void Slider::leaveEvent(QEvent *e)
 {
     emit onLeave();
-    QSlider::leaveEvent(e);
+//     QSlider::leaveEvent(e);
 }
 
 void Slider::mouseMoveEvent(QMouseEvent *e)
diff -ur a/examples/QMLPlayer/main.cpp b/examples/QMLPlayer/main.cpp
--- a/examples/QMLPlayer/main.cpp	2024-01-28 19:58:27.000000000 -0300
+++ b/examples/QMLPlayer/main.cpp	2024-01-29 18:38:48.241153367 -0300
@@ -26,7 +26,7 @@
 #include <QtQml/QQmlEngine>
 #include <QtQml/QQmlContext>
 #include <QtGui/QScreen>
-#include <QTouchDevice>
+// #include <QTouchDevice>
 #ifdef Q_OS_ANDROID
 #include <QAndroidJniObject>
 #endif
@@ -97,17 +97,17 @@
     if (qFuzzyIsNull(sr))
         sr = r;
     engine->rootContext()->setContextProperty(QStringLiteral("scaleRatio"), sr);
-    qDebug() << "touch devices: " << QTouchDevice::devices();
+//     qDebug() << "touch devices: " << QTouchDevice::devices();
     engine->rootContext()->setContextProperty(QStringLiteral("isTouchScreen"), false);
 #ifdef Q_OS_WINPHONE
     engine->rootContext()->setContextProperty(QStringLiteral("isTouchScreen"), true);
 #endif
-    foreach (const QTouchDevice* dev, QTouchDevice::devices()) {
-        if (dev->type() == QTouchDevice::TouchScreen) {
-            engine->rootContext()->setContextProperty(QStringLiteral("isTouchScreen"), true);
-            break;
-        }
-    }
+//     foreach (const QTouchDevice* dev, QTouchDevice::devices()) {
+//         if (dev->type() == QTouchDevice::TouchScreen) {
+//             engine->rootContext()->setContextProperty(QStringLiteral("isTouchScreen"), true);
+//             break;
+//         }
+//     }
     QString qml = QStringLiteral("qml/QMLPlayer/main.qml");
     if (QFile(qApp->applicationDirPath() + QLatin1String("/") + qml).exists())
         qml.prepend(qApp->applicationDirPath() + QLatin1String("/"));
diff -ur a/examples/videographicsitem/videoplayer.cpp b/examples/videographicsitem/videoplayer.cpp
--- a/examples/videographicsitem/videoplayer.cpp	2024-01-28 19:58:27.000000000 -0300
+++ b/examples/videographicsitem/videoplayer.cpp	2024-01-29 13:21:11.664587622 -0300
@@ -100,12 +100,12 @@
         view->setViewport(0);
         return;
     }
-#ifndef QT_NO_OPENGL
-    QGLWidget *glw = new QGLWidget();//QGLFormat(QGL::SampleBuffers));
-    glw->setAutoFillBackground(false);
-    view->setViewport(glw);
-    view->setCacheMode(QGraphicsView::CacheNone);
-#endif
+// #ifndef QT_NO_OPENGL
+//     QGLWidget *glw = new QGLWidget();//QGLFormat(QGL::SampleBuffers));
+//     glw->setAutoFillBackground(false);
+//     view->setViewport(glw);
+//     view->setCacheMode(QGraphicsView::CacheNone);
+// #endif
 }
 
 void VideoPlayer::setOrientation(int value)
diff -ur a/examples/videogroup/videogroup.cpp b/examples/videogroup/videogroup.cpp
--- a/examples/videogroup/videogroup.cpp	2024-01-28 19:58:27.000000000 -0300
+++ b/examples/videogroup/videogroup.cpp	2024-01-29 18:13:30.122007140 -0300
@@ -20,7 +20,7 @@
 
 #include "videogroup.h"
 #include <QApplication>
-#include <QDesktopWidget>
+// #include <QDesktopWidget>
 #include <QEvent>
 #include <QFileDialog>
 #include <QGridLayout>
@@ -122,7 +122,7 @@
         QGridLayout *layout = new QGridLayout;
         layout->setSizeConstraint(QLayout::SetMaximumSize);
         layout->setSpacing(1);
-        layout->setMargin(0);
+//         layout->setMargin(0);
         layout->setContentsMargins(0, 0, 0, 0);
         view->setLayout(layout);
 
diff -ur a/examples/videowall/VideoWall.cpp b/examples/videowall/VideoWall.cpp
--- a/examples/videowall/VideoWall.cpp	2024-01-28 19:58:27.000000000 -0300
+++ b/examples/videowall/VideoWall.cpp	2024-01-29 18:29:20.058098639 -0300
@@ -20,7 +20,7 @@
 
 #include "VideoWall.h"
 #include <QApplication>
-#include <QDesktopWidget>
+// #include <QDesktopWidget>
 #include <QEvent>
 #include <QFileDialog>
 #include <QGridLayout>
@@ -46,7 +46,7 @@
     view = new QWidget;
     if (view) {
         qDebug("WA_OpaquePaintEvent=%d", view->testAttribute(Qt::WA_OpaquePaintEvent));
-        view->resize(qApp->desktop()->size());
+//         view->resize(qApp->desktop()->size());
         view->move(QPoint(0, 0));
         view->show();
     }
@@ -117,13 +117,13 @@
     }
     qDebug("show wall: %d x %d", r, c);
 
-    int w = view ? view->frameGeometry().width()/c : qApp->desktop()->width()/c;
-    int h = view ? view->frameGeometry().height()/r : qApp->desktop()->height()/r;
+    int w = 600;  // ? view->frameGeometry().width()/c : qApp->desktop()->width()/c;
+    int h = 300;  // ? view->frameGeometry().height()/r : qApp->desktop()->height()/r;
     if (view) {
         QGridLayout *layout = new QGridLayout;
         layout->setSizeConstraint(QLayout::SetMaximumSize);
         layout->setSpacing(1);
-        layout->setMargin(0);
+//         layout->setMargin(0);
         layout->setContentsMargins(0, 0, 0, 0);
         view->setLayout(layout);
     }
Somente em b/: .idea
diff -ur a/src/AVError.cpp b/src/AVError.cpp
--- a/src/AVError.cpp	2024-01-28 19:58:27.000000000 -0300
+++ b/src/AVError.cpp	2024-01-28 21:58:46.410917617 -0300
@@ -19,6 +19,7 @@
     Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301  USA
 ******************************************************************************/
 #include "QtAV/AVError.h"
+#include <QObject>
 #include "QtAV/private/AVCompat.h"
 #ifndef QT_NO_DEBUG_STREAM
 #include <QtCore/qdebug.h>
diff -ur a/src/filter/X11FilterContext.cpp b/src/filter/X11FilterContext.cpp
--- a/src/filter/X11FilterContext.cpp	2024-01-28 19:58:27.000000000 -0300
+++ b/src/filter/X11FilterContext.cpp	2024-01-28 21:58:46.400917616 -0300
@@ -182,7 +182,7 @@
     this->plain = true;
 
     QFontMetrics fm(font);
-    text_q = QImage(fm.width(text), fm.height(), QImage::Format_ARGB32);
+    text_q = QImage(fm.horizontalAdvance(text), fm.height(), QImage::Format_ARGB32);
     text_q.fill(0);
     painter->begin(&text_q);
     painter->translate(0, 0);
diff -ur a/src/output/OutputSet.h b/src/output/OutputSet.h
--- a/src/output/OutputSet.h	2024-01-28 19:58:27.000000000 -0300
+++ b/src/output/OutputSet.h	2024-01-28 21:58:46.412917617 -0300
@@ -23,6 +23,7 @@
 #define QTAV_OUTPUTSET_H
 
 #include <QtCore/QObject>
+#include <climits>
 #include <QtCore/QMutex>
 #include <QtCore/QWaitCondition>
 #include "QtAV/QtAV_Global.h"
diff -ur a/src/subtitle/SubtitleProcessorLibASS.cpp b/src/subtitle/SubtitleProcessorLibASS.cpp
--- a/src/subtitle/SubtitleProcessorLibASS.cpp	2024-01-28 19:58:27.000000000 -0300
+++ b/src/subtitle/SubtitleProcessorLibASS.cpp	2024-01-28 21:58:46.402917616 -0300
@@ -115,7 +115,7 @@
     printf("\n");
     fflush(0);
     return;
-    QString msg(QStringLiteral("{libass} ") + QString().vsprintf(fmt, va)); //QString.vsprintf() may crash at strlen().
+    QString msg(QStringLiteral("{libass} ") + QString().vasprintf(fmt, va)); //QString.vasprintf() may crash at strlen().
     if (level == MSGL_FATAL)
         qFatal("%s", msg.toUtf8().constData());
     else if (level <= 2)
diff -ur a/src/utils/BlockingQueue.h b/src/utils/BlockingQueue.h
--- a/src/utils/BlockingQueue.h	2024-01-28 19:58:27.000000000 -0300
+++ b/src/utils/BlockingQueue.h	2024-01-28 21:58:46.408917617 -0300
@@ -23,6 +23,7 @@
 #ifndef QTAV_BLOCKINGQUEUE_H
 #define QTAV_BLOCKINGQUEUE_H
 
+#include <climits>
 #include <QtCore/QReadWriteLock>
 #include <QtCore/QScopedPointer>
 #include <QtCore/QWaitCondition>
diff -ur a/widgets/Direct2DRenderer.cpp b/widgets/Direct2DRenderer.cpp
--- a/widgets/Direct2DRenderer.cpp	2024-01-28 19:58:27.000000000 -0300
+++ b/widgets/Direct2DRenderer.cpp	2024-01-28 22:22:07.207997004 -0300
@@ -55,7 +55,7 @@
     Q_OBJECT
     DPTR_DECLARE_PRIVATE(Direct2DRenderer)
 public:
-    Direct2DRenderer(QWidget* parent = 0, Qt::WindowFlags f = 0);
+    Direct2DRenderer(QWidget* parent = 0, Qt::WindowFlags f = Qt::WindowFlags());
     VideoRendererId id() const Q_DECL_OVERRIDE;
     bool isSupported(VideoFormat::PixelFormat pixfmt) const Q_DECL_OVERRIDE;
 
diff -ur a/widgets/GDIRenderer.cpp b/widgets/GDIRenderer.cpp
--- a/widgets/GDIRenderer.cpp	2024-01-28 19:58:27.000000000 -0300
+++ b/widgets/GDIRenderer.cpp	2024-01-28 22:22:31.896998404 -0300
@@ -41,7 +41,7 @@
     Q_OBJECT
     DPTR_DECLARE_PRIVATE(GDIRenderer)
 public:
-    GDIRenderer(QWidget* parent = 0, Qt::WindowFlags f = 0); //offscreen?
+    GDIRenderer(QWidget* parent = 0, Qt::WindowFlags f = Qt::WindowFlags()); //offscreen?
     VideoRendererId id() const Q_DECL_OVERRIDE;
     bool isSupported(VideoFormat::PixelFormat pixfmt) const Q_DECL_OVERRIDE;
     /* WA_PaintOnScreen: To render outside of Qt's paint system, e.g. If you require
diff -ur a/widgets/X11Renderer.cpp b/widgets/X11Renderer.cpp
--- a/widgets/X11Renderer.cpp	2024-01-28 19:58:27.000000000 -0300
+++ b/widgets/X11Renderer.cpp	2024-01-28 22:21:45.318995764 -0300
@@ -47,7 +47,7 @@
     Q_OBJECT
     DPTR_DECLARE_PRIVATE(X11Renderer)
 public:
-    X11Renderer(QWidget* parent = 0, Qt::WindowFlags f = 0);
+    X11Renderer(QWidget* parent = 0, Qt::WindowFlags f = Qt::WindowFlags());
     VideoRendererId id() const Q_DECL_OVERRIDE;
     bool isSupported(VideoFormat::PixelFormat pixfmt) const Q_DECL_OVERRIDE;
 
@@ -438,13 +438,22 @@
     if (bgRegion.isEmpty())
         return;
     DPTR_D(X11Renderer);
+
+    QRegion::const_iterator it = bgRegion.begin();
+    QRegion::const_iterator end = bgRegion.end();
+    while (it != end) {
+        QRect r = *it;
+        XFillRectangle(d.display, winId(), d.gc, r.x(), r.y(), r.width(), r.height());
+        ++it;
+    }
+
     // TODO: fill once each resize? mpv
     // TODO: set color
     //XSetBackground(d.display, d.gc, BlackPixel(d.display, DefaultScreen(d.display)));
-    const QVector<QRect> bg(bgRegion.rects());
-    foreach (const QRect& r, bg) {
-        XFillRectangle(d.display, winId(), d.gc, r.x(), r.y(), r.width(), r.height());
-    }
+//     const QVector<QRect> bg(bgRegion.rects());
+//     foreach (const QRect& r, bg) {
+//         XFillRectangle(d.display, winId(), d.gc, r.x(), r.y(), r.width(), r.height());
+//     }
     XFlush(d.display); // apply the color
 }
 
diff -ur a/widgets/XVRenderer.cpp b/widgets/XVRenderer.cpp
--- a/widgets/XVRenderer.cpp	2024-01-28 19:58:27.000000000 -0300
+++ b/widgets/XVRenderer.cpp	2024-01-28 22:07:50.251948438 -0300
@@ -50,7 +50,7 @@
     Q_OBJECT
     DPTR_DECLARE_PRIVATE(XVRenderer)
 public:
-    XVRenderer(QWidget* parent = 0, Qt::WindowFlags f = 0);
+    XVRenderer(QWidget* parent = 0, Qt::WindowFlags f = Qt::WindowFlags());
     virtual VideoRendererId id() const Q_DECL_OVERRIDE;
     virtual bool isSupported(VideoFormat::PixelFormat pixfmt) const Q_DECL_OVERRIDE;
 
@@ -492,10 +492,19 @@
         return;
     DPTR_D(XVRenderer);
     // TODO: set color
-    const QVector<QRect> bg(bgRegion.rects());
-    foreach (const QRect& r, bg) {
+
+    QRegion::const_iterator it = bgRegion.begin();
+    QRegion::const_iterator end = bgRegion.end();
+    while (it != end) {
+        QRect r = *it;
         XFillRectangle(d.display, winId(), d.gc, r.x(), r.y(), r.width(), r.height());
+        ++it;
     }
+
+//    const QVector<QRect> bg(bgRegion.rects());
+//    foreach (const QRect& r, bg) {
+//        XFillRectangle(d.display, winId(), d.gc, r.x(), r.y(), r.width(), r.height());
+//    }
     XFlush(d.display);
 }
 
